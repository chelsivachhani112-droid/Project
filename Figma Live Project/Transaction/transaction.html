<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions | FINOVA Intelligence</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-finova">

    <main class="wrapper">
        <header class="page-title-row">
            <div>
                <h1>Transactions</h1>
                <p>Track your financial ecosystem in real-time</p>
            </div>
            <div class="action-btns">
                <button class="btn-secondary" onclick="exportToPDF()">
                    <i data-lucide="download"></i> Export PDF
                </button>
                <button class="btn-primary-heavy" onclick="openDrawer()">
                    <i data-lucide="plus"></i> Add Transaction
                </button>
            </div>
        </header>

        <div class="metrics-container">
            <div class="m-card">
                <div class="m-header">
                    <span class="m-label">Total Inflow</span>
                    <div class="m-icon-box inc"><i data-lucide="trending-up"></i></div>
                </div>
                <h2 id="total-income">₹0.00</h2>
            </div>

            <div class="m-card">
                <div class="m-header">
                    <span class="m-label">Total Outflow</span>
                    <div class="m-icon-box exp"><i data-lucide="trending-down"></i></div>
                </div>
                <h2 id="total-expense">₹0.00</h2>
            </div>

            <div class="m-card active-balance">
                <div class="m-header">
                    <span class="m-label">Net Balance</span>
                    <div class="m-icon-box bal"><i data-lucide="wallet"></i></div>
                </div>
                <h2 id="current-balance">₹0.00</h2>
            </div>
        </div>

        <section class="list-section">
            <div class="list-head">
                <h3>Activity History</h3>
                <div class="list-filters">
                    <select id="history-filter" class="history-select" onchange="renderList()">
                        <option value="latest">Latest first</option>
                        <option value="oldest">Oldest first</option>
                        <option value="past-month">Past Month</option>
                    </select>
                </div>
            </div>

            <div id="tx-list" class="transaction-feed">
                </div>
        </section>
    </main>

    <div id="drawer-overlay" class="drawer-overlay" onclick="closeDrawer()">
        <div class="drawer-panel" onclick="event.stopPropagation()">
            <div class="drawer-head">
                <h2 id="drawer-title">Add Entry</h2>
                <button class="btn-close" onclick="closeDrawer()">&times;</button>
            </div>
            
            <form id="tx-form">
                <div class="input-wrap">
                    <label>Flow Type</label>
                    <div class="segmented-picker">
                        <input type="radio" name="type" id="type-exp" value="expense" checked onchange="updateFormTheme()">
                        <label for="type-exp">Expense</label>
                        <input type="radio" name="type" id="type-inc" value="income" onchange="updateFormTheme()">
                        <label for="type-inc">Income</label>
                    </div>
                </div>

                <div class="input-wrap">
                    <label>Amount (₹)</label>
                    <input type="number" id="tx-amount" class="field" placeholder="0.00" required>
                </div>

                <div class="input-wrap">
                    <label id="cat-label">Category</label>
                    <select id="tx-category" class="field">
                        </select>
                </div>

                <div class="input-wrap">
                    <label>Description</label>
                    <input type="text" id="tx-desc" class="field" placeholder="E.g. Coffee, Monthly Salary...">
                </div>

                <div class="input-wrap">
                    <label>Your Name (for PDF Password)</label>
                    <input type="text" id="user-name" class="field" placeholder="First 4 letters" maxlength="4">
                    <small>Used for protected PDF: NAME + YEAR</small>
                </div>

                <button type="submit" class="btn-full">Confirm Entry</button>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>